import * as anchor from "@coral-xyz/anchor";
import { Program } from "@coral-xyz/anchor";
import { Zkek } from "../target/types/zkek";

describe("zkek", () => {
  // Configure the client to use the local cluster.
  anchor.setProvider(anchor.AnchorProvider.env());

  const program = anchor.workspace.zkek as Program<Zkek>;

  it("Verify random proof!", async () => {
    const PUBLIC_INPUTS = [
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 3,
      ],
      [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 5,
      ],
    ];

    const PROOF = [
      48, 28, 211, 132, 125, 85, 154, 37, 165, 132, 238, 79, 188, 31, 230, 155,
      64, 103, 206, 150, 101, 104, 139, 217, 79, 211, 112, 107, 100, 51, 8, 121,
      2, 84, 203, 227, 51, 22, 196, 73, 121, 6, 135, 12, 165, 198, 117, 179, 4,
      115, 166, 83, 204, 82, 143, 219, 53, 116, 121, 82, 7, 28, 158, 166, 18,
      82, 100, 188, 116, 227, 240, 6, 226, 162, 80, 114, 243, 208, 221, 166, 71,
      54, 222, 2, 155, 231, 202, 39, 132, 238, 199, 174, 234, 58, 240, 57, 10,
      49, 236, 238, 167, 250, 243, 143, 194, 250, 239, 61, 23, 235, 212, 135,
      236, 84, 96, 241, 81, 0, 115, 168, 86, 81, 67, 49, 249, 23, 7, 179, 3, 59,
      29, 158, 105, 119, 175, 221, 181, 2, 70, 128, 47, 55, 40, 43, 134, 128,
      66, 102, 36, 125, 178, 252, 113, 95, 117, 241, 244, 204, 141, 219, 5, 80,
      251, 125, 51, 140, 211, 59, 130, 104, 206, 141, 44, 130, 77, 75, 126, 81,
      0, 185, 224, 29, 63, 120, 7, 147, 60, 46, 1, 127, 10, 112, 38, 176, 174,
      74, 246, 76, 51, 85, 36, 2, 216, 237, 197, 127, 62, 47, 50, 54, 70, 202,
      25, 146, 246, 91, 175, 153, 13, 89, 236, 242, 87, 94, 48, 47, 162, 90, 37,
      107, 240, 156, 236, 109, 215, 146, 105, 57, 235, 112, 106, 137, 125, 92,
      47, 165, 17, 179, 29, 185, 86, 147, 173, 153, 139, 144,
    ];

    const tx = await program.methods.initialize(PROOF, PUBLIC_INPUTS).rpc();

    console.log("Your transaction signature", tx);
  });
});
